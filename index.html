<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    
    <title>JavaScript Fundamentals for ColdFusion Developers</title>
    
    <meta name="description" content="A presentation on JavaScript fundamentals for ColdFusion developers.">
    <meta name="author" content="Ryan Anklam">
    <meta name="viewport" content="width=1024, user-scalable=no">
    

    <!-- Core and extension CSS files -->
    <link href="google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
    <link rel="stylesheet" href="core/deck.core.css">
    <link rel="stylesheet" href="extensions/goto/deck.goto.css">
    <link rel="stylesheet" href="extensions/menu/deck.menu.css">
    <link rel="stylesheet" href="extensions/navigation/deck.navigation.css">
    <link rel="stylesheet" href="extensions/status/deck.status.css">
    <link rel="stylesheet" href="extensions/hash/deck.hash.css">

    <link rel="stylesheet" href="extensions/codemirror/deck.codemirror.css">

    <!-- Theme CSS files (menu swaps these out) 
    <link rel="stylesheet" id="style-theme-link" href="themes/style/web-2.0.css">
    -->
    <link rel="stylesheet" id="transition-theme-link" href="themes/transition/horizontal-slide.css">
    
    <!-- Custom CSS just for this page -->
    <link rel="stylesheet" href="introduction.css">
    
    <link rel="stylesheet" href="extensions/codemirror/themes/default.css">

</head>

<body class="deck-container" onload="prettyPrint()">

<!-- 
Title
 -->

<div class="slide" id="title-slide">
    <ul>
        <li>Water</li>
        <li>Turn off all chrome extentions</li>
        <li>ColdFusion Started</li>
        <li>Close Tabs</li>
        <li>Close IM's</li>
    </ul>
</div>

<div class="slide" id="introslide">
    <h1>The Art of JavaScript: Level Up Your Skills In 60 Minutes</h1>
</div>

<div class="slide" id="about-me">
    <h2>Obligitory About me</h2>
    <p>ryan.anklam@gmail.com<br>
       @bittersweeryan<br>
       <a href="http://blog.bittersweetryan.com" target="_blank">blog.bittersweetryan.com</a>
    </p>
    <ul>
        <li>Technical Solutions Architect at IDL Solutions <a href="http://www.idl.com" target="_blank">http://www.idl.com</a>.
            <ul>
                <li>Focus on Federal &amp; Local Government Projects</li>
                <li>Lately focused on front end engineering for single page, enterprise apps.</li>
            </ul>
        </li>
        <li>Web developer since 1996</li>
        <li>Open Source
            <ul>
                <li>
                    <strong>Author</strong>: ColdFusion Koans, GitHub News Filter, Envelope.js
                </li>
                <li>
                    <strong>Contributor</strong>: JavaScript Koans, MXUnit, FW/1
                </li>
            </ul>
        </li>
        <li>Known To Make Obscure Simpsons Refernces.</li>
    </ul>
</div>

<!-- 
About me
 -->

<div class="slide" id="introduction">
    <h2>Introduction</h2>
    <p>
        JavaScript Rules.  
    </p>
</div>

<!-- 
Cover
 -->

<div class="slide" id="what-well-cover">
    <h2>What we'll cover</h2>
    <ul>
        <li class="slide" id="basics">
            <h3>Basics  (variables, loops, arrays, etc)</h3>
        </li>
        <li class="slide" id="coverObj">
            <h3>Objects</h3>
        </li>
        <li class="slide" id="coverFn">
            <h3>Functions</h3>
        </li>
        <li class="slide" id="coverInheritance">
            <h3>Inheritance</h3>
        </li>
        <li class="slide" id="coverThis">
            <h3>This</h3>
        </li>
        <li class="slide" id="coverPatterns">
            <h3>Design Patterns</h3>
        </li>
    </ul>
</div>

<div class="slide" id="basicsTitle">
    <h1>Let's Start With Some Basics</h1>
</div>

<!-- 
Variables
 -->

<div class="slide" id="variablesTitle">
    <h1>Variables</h1>
</div>

<div class="slide" id="variables">
    <h2>Variables</h2>
    <p>Variables in JavaScript are very poorly scoped by default, any variable that is not declared with the var keyword goes into the global scope.</p>
     <pre><code class="prettyprint">function doSomething(){
    myVar = "foo"; //this goes into the global scope which == bad
    var myOtherVar = "bar"; //this goes into the function scope which == good     
}

console.log( myVar ); //foo 
console.log( myOtherVar ); //error
</code></pre>
<input type="button" data-run="scoping" value="Run">
</div>

<div class="slide" id="variables2">
    <h2>Meh!</h2>
      <textarea id="code1" name="code" class="code" mode="javascript" style="display: none;" runnable="true">for(i = 0; i < 10; i++){
    doMore();
    console.log( i );
}

function doMore(){
    for(i = 0; i < 10; i++){
        
    }
};</textarea>

</div>

<div class="slide" id="variables1">
    <h2>From Meh To Yeah!</h2>
      <textarea id="code1" name="code" class="code" mode="javascript" style="display: none;" runnable="true">for(var i = 0; i < 10; i++){
    doMore();
    console.log( i );
}

function doMore(){
    for(var i = 10; i < 10; i++){
        
    }
};</textarea>
</div>

<div class="slide" id="variables4">
    <h2>Variables</h2>
    <h4>There are 6 data types in JavaScript</h4>
    <ul>
        <li>string</li>
        <li>number</li>
        <li>object</li>
        <li>undefined</li>
        <li>null</li>
        <li>boolean</li>
    </ul>
</div>
<!-- 
Numbers
 -->

<div class="slide" id="variables3">
    <h2>Numbers</h2>
        <p>All numbers in JavaScript are 64 bit floating point numbers.</p>
        <div>
        <textarea id="code1" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var result = 0.06 + 0.01;
console.log( "0.06 + 0.01 = " + result );</textarea>
</div>
        <p><a href="http://download.oracle.com/docs/cd/E19957-01/806-3568/ncg_goldberg.html">http://download.oracle.com/docs/cd/E19957-01/806-3568/ncg_goldberg.html</a></p>

        <p>JavaScript has a BigNum library at <a href="https://github.com/jtobey/javascript-bignum" target="_blank">https://github.com/jtobey/javascript-bignum</a></p>
        <p>Use the <code class="prettyprint">toFixed()</code> method to round to a fixed number of decimal places.</p>
        <div>
            <textarea id="code1" name="code" class="code" mode="javascript" style="display: none;" runnable="true">//
//toFixed rounds to a fixed number of decimals
console.log( 3.14159.toFixed(2) ); </textarea>
        </div>
</div>

<div class="slide" id="numbers2">
    <h2>Numbers</h2>
    <p>In JavaScript there is also a special value, <code class="prettyprint">NaN</code>, which stands for "not a number".  You'll get NaN in situations like trying to do math on a var that is <code class="prettyprint">undefined</code> or trying to perform multiplication, division, or subtraction on a string.</p>
    <ul>
        <li class="slide" id="nan1"><code class="prettyprint">NaN is False</code></li>
        <li class="slide" id="nan2"><code class="prettyprint">NaN !== NaN</code></li>
        <li class="slide" id="na3">Use <code class="prettyprint">isNaN()</code> to test for NaN</li>
    </ul>
</div>

<!-- 
Arrays
 -->

<div class="slide" id="arraysTitle">
    <h1>Arrays</h1>
</div>

<div class="slide" id="arrays">
    <h2>Arrays</h2>
        <P>Arrays can be created two ways:</P>
        <pre><code class="prettyprint">var myArray = new Array();</code></pre>
        <p>AND</p>
        <pre><code class="prettyprint">var myArray = ["item1", "item2", myObj, []];</code></pre>
        <p>In order to create multi-dimensional arrays in JavaScript you nest arrays:</p>
        <pre><code class="prettyprint">myArray[0] = ["nested one", "nested two"];
myArray[0][1]; //nested two</code></pre>
</div>

<div class="slide" id="arrays2">
    <h2>Arrays</h2>
    <p>Arrays are objects so they have methods, here are a few you'll commonly see used in projects: </p>
        <div class="slide" id="arm1"><pre><code class="prettyprint">myArray.length //mutable in JS, set length to resize arary

myArray.push(item) //append item to the end of the array

myArray.pop() //removes the last element of the array and returns it

myArray.concat(anotherArray) //adds two arrays together, returns a new array. myArray unchanged!

myArray.join(",") //combines elements into string, separated by argument
</code></pre></div>
</div>

<div class="slide" id="arrays2Demo">
    <h2>Arrays</h2>
    <p>Use push & pop together to create a stack (LIFO)</p>
     <textarea id="code1" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var myStack = ['Aaron','Drew','Tom','Peyton'];

myStack.push('Eli');

console.log( myStack.pop() );</textarea>
</div>


<div class="slide" id="arrays13">
    <h2>Arrays</h2>
    <p>More methods:</p>
        <div id="arm2"><pre><code class="prettyprint">myArray.sort() //sorts an array

myArray.splice(1,2) //deletes 2 items from the array starting at position 1

myArray.slice(1,2) //returns 2 items from the array starting at position 1

myArray.shift() //removes the first element of the array and returns it
</code></pre></div>
</div>

<div class="slide" id="arrays3Demo">
    <h2>Arrays</h2>
    <p>Use push & shift together to create a queue (FIFO)</p>
     <textarea id="code1" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var myStack = ['Aaron','Drew','Tom','Peyton'];

myStack.push('Eli');

console.log( myStack.shift() );</textarea>
</div>

<div class="slide" id="arrays3Demo2">
    <h2>Arrays</h2>
<p>Use use slice() to make a one level deep copy of an Array.</p>
     <textarea id="code1" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var myArray = ['Aaron','Drew','Tom','Peyton'];
var myArray2 = myArray; //holds a reference to myArray
var myArray3 = myArray.slice(); //is truly a new array

myArray2[2] = 'Cam'; //changes myArray
myArray3[1] = 'Phillip'

console.log( myArray );
console.log( myArray3 );</textarea>
</div>

<!-- 
Operators
 -->

<div class="slide" id="statementsTitle">
    <h1>Operators</h1>
</div>

<div class="slide" id="operators">
    <h2>Operators</h2>
    <p>Most of the operators in JavaScript are very similar to what we have available in ColdFusion, but there are some
        subtle differences to be aware of.</p>
</div>

<div class="slide" id="comparisons">
    <h2>Comparisons</h2>
    <p>In JavaScript there are TWO sets of comparison operators;</p>
    <ul>
        <li class="slide" id="comp1">Type coercion operators: == and !=</li>
        <li class="slide" id="comp2">Non-type coercion operators: === and !==</li>
    </ul>
</div>

<div class="slide" id="comparisons2">
    <h2>Comparisons</h2>
    <p>What does this mean to you as a JavaScript programmer?
    <textarea id="code1" name="code" class="code" mode="javascript" style="display: none;" runnable="true">console.log( "1" == 1 );

console.log( "1" === 1 );

console.log( [7] == 7 );  //automatically calls toString() on  
                                 //eachelement in the array
console.log( [7] === 7 );</textarea>
    <p>So, which one do you use?</p>
    <p class="slide">
    Always use === when comparing <code class="prettyprint">0</code>, <code class="prettyprint">undefined,</code>, booleans, and empty strings.
    </p>

</div>

<div class="slide" id="comparisons3">
    <h2>Comparisons</h2>
    <h3>If I'm using === and I know "<code class="prettyprint">1</code>" is a numeric value how do I get "<code class="prettyprint">1</code>" to equal <code class="prettyprint">1</code>?</h3>
    <p>There are a few ways, some of the most common are:</p>
    <ol>
        <li class="slide" id="comp7">
            Use the Number object: <code class="prettyprint">var num = Number("1").</code>
        </li>
        <li class="slide" id="comp8">
            Use the parseInt function: <code class="prettyprint">var num = parseInt("01",10)</code>.<br>The second param is the radix.  For this presentation we'll just say always specify 10.  If you didn't specify the radix the string here would have been treated as an octal.
        </li>
        <li class="slide" id="comp9">
            If you are sure that the value you want to convert is an integer, you can use the "+" to convert a string to a number: <code class="prettyprint">var num = +&quot;3&quot;</code>.
        </li>       
    </ol>
</div>

<div class="slide" id="comparisons4">
    <h2>Truthy / Falsy Values</h2>
    <h3>Falsy Values</h3>
        <ul>
            <li>
                <code class="prettyprint">false</code>
            </li>
            <li>
                <code class="prettyprint">0</code>
            </li>
            <li>
                ""
            </li>
            <li>
                <code class="prettyprint">undefined</code>
            </li>
            <li>
                <code class="prettyprint">NaN</code>
            </li>
            <li>
                <code class="prettyprint">null</code>
            </li>
        </ul>
        <p>Anything that is not falsy is truthy in JavaScript.</p>
        <p>Use <code class="prettyprint">null</code> when initializing an object with no value.</p>
</div>

<div class="slide" id="andor">
    <h1>Logical Operators</h1>
</div>

<div class="slide" id="andor2">
    <h2>Logical Operators</h2>
    <h3>JavaScript OR Operator <code class="prettyprint">||</code></h3>
    <p>The || operator returns the value of the first expression if it's true otherwise returns the value of the second expression.
    <textarea id="code3" name="code" class="code" mode="javascript" style="display: none;" runnable="true">
    console.log( null || "hello" ); 

    console.log( "world" || "foo" );</textarea>
</div>

<div class="slide" id="andor3">
    <h2>Logical Operators</h2>
    <p>The || operator can be used to set default values.</p>
    <pre><code class="prettyprint">var myFunc = function(arg){

    var myVal = document.getElementById(arg) || 
        document.createElement("div"); //if no arg was passed in myVal is "defaultValue"

        console.log( myVal );
};

myFunc();
myFunc("andor3");</code></pre>
<input type="button" data-run="andor3" value="Run">
</div>

<div class="slide" id="andor3div">
    <h2>Logical</h2>
   <h3>JavaScript AND Operator <code class="prettyprint">&&</code></h3>
   <p>The <code class="prettyprint">&&</code> returns the value of the first operator if it is false, otherwise it returns the value of the second.</p>
    <textarea id="code5" name="code" class="code" mode="javascript" style="display: none;" runnable="true">console.log( false && "Foo" );

console.log( true && "Bar" );</textarea>
</div>

<div class="slide" id="loopsTitle">
    <h1>Loops</h1>
</div>

<div class="slide" id="foriinloops">
    <h2>Loops</h2>
    <h3>for-in loops</h3>
    <p>In JavaScript you can loop through the properties of an object using a for-in loop.</p>

    <p><strong style="color:red">Warning! </strong>
    When looping through an object using for-in you will get all of the objects properties AND all of the properites of its prototype chain.</p>
    <h3>JavaScript</h3>
<textarea id="code6" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var myObj = {foo : "Foo", bar : "Bar", baz : "Baz"};

for(var myKey in myObj){

   console.log( myKey );

}</textarea>
</div>

<!-- 
Objects
 -->

<div class="slide" id="objectsTitle">
    <h1>Objects</h1>
</div>

<div class="slide" id="objects">
    <h2>Objects</h2>
    <p>Objects in JavaScript can be though of as a set of key-value pairs.</p>
    <pre><code class="prettyprint">myObject = {
    foo : &quot;Foo&quot;, 
    bar : &quot;Bar&quot;, 
    anotherObject : {
        baz : &quot;Baz&quot;, 
        pez = &quot;Pez&quot;
    }
}; //this is called an object literal.  It's equal to new Object();</code></pre>
</div>

<div class="slide" id="objects1">
    <h2>Objects</h2>
    <p>You can access an object's properties with "dot" notation or with associative array notation</p>
    <textarea id="code66" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var myObject = {foo : 'Foo'};

console.log( myObject.foo );
console.log( myObject['foo'] );

myObject['foo bar'] = 'foo bar'; //non standard property names

console.log( myObject['foo ' + 'bar'] );</textarea>
</div>

<div class="slide" id="objects7">
    <h2>Objects</h2>
    <p>When accessing properties from other properties in an object, use the <code class="prettyprint">this</code> keyword.</p>
    <textarea id="code7" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var myObj = {
    firstName : 'Homer',
    sayHello: function(){
        console.log('Hello, ' + this.firstName);
    }    
};

myObj.sayHello();</textarea>
</div>

<div class="slide" id="objects2">
    <h2>Objects</h2>
    <p>To check if a property exists in an objects use the<code class="prettyprint">hasOwnProperty()</code> method or the <code class="prettyprint">in</code> operator. <code class="prettyprint">hasOwnProperty</code> will only search the current object whereas <code class="prettyprint">in</code> will search all the way up the prototype chain.</p>
    <h3>JavaScript</h3>
    <textarea id="code66" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var myObject = {foo : 'Foo'};

myObject.__proto__ = { baz : "Baz" };

console.log( 'baz' in myObject );

console.log( myObject.hasOwnProperty( 'baz' ) );</textarea>
</div>

<!-- 
Functions
 -->

<div class="slide" id="functionsTitle">
    <h1>Functions</h1>
</div>

<div class="slide" id="functions">
    <h2>Functions</h2>
    <p>JavaScript functions are the beating heart of a JavaScript application and are one of the most powerful features of the language.</p>
    <ul>
        <li class="slide">All functions return something!  If there is no <code class="prettyprint">return</code> statement a function will return the keyword <code class="prettyprint">undefined</code>.</li>
        <li class="slide">Functions can have properties just like objects.</li>
    </ul>
</div>

<div class="slide" id="function3">
    <h2>Creating Functions</h2>
    <h3>Function Statement</h3>
    <pre><code class="prettyprint">function myFunc(args) {
    ...     
};
</code></pre> 
    <h3>Function Expression</h3>
    <p>Function expressions don't need to be named, these are called anonymous functions.</p>
<pre><code class="prettyprint">var myFunc = function(args){
    ...     
};
</code></pre>
</div>

<div class="slide" id="hoisting">
    <h2>Hoisting</h2>
    <p>There is one fundamental difference between function expressions and statements: hoisting.  Hoisting is when the JavaScript compiler takes a function or variable and moves it to the top of the current scope.</p>
</div>

<div class="slide" id="hoisting2">
    <h2>Function Declaration Before Hoisting</h2>
    <pre><code class="prettyprint">function hoistingExample(){
    var firstVar;

    firstVar = "";

    var secondVar = "";

    firstVar + secondVar;

    var firstFun = function(){
        //do something
    };

    function secondFunction(){
        // do another thing
    }
}</code></pre>
</div>

<div class="slide" id="hoisting3">
    <h2>Function Declaration After Hoisting</h2>
    <pre><code class="prettyprint">function hoistingExample(){
    //the function statement has been brought to the top of the scope
    function secondFunction(){ 
        // do another thing
    }

    //declared the variables
    var firstVar;
    var secondVar;
    var firstFun;

    //instantiate the variables where they are in the code
    firstVar = "";

    secondVar = "";

    firstVar + secondVar;

    firstFun = function(){
        //do something
    }
}</code></pre>
</div>

<div class="slide" id="function4">  
    <h2>Function Arguments</h2>
    <p>Arguments in JavaScript are stored in an array-like object.  The "arguments" object has a length property but none of the other array methods.</p>
    <pre><code class="prettyprint">var myFunc = function(){
    console.log(arguments);
};

myFunc("Hello", "World", function(){});</code></pre>
<input type="button" data-run="args" value="Run">
</div>

<div class="slide" id="function5">
    <h2>Function Arguments</h2>
    <p>Since JavaScript is a type-less language its always a good idea to check the type of arguments.</p>
    <p>To do this we are provided with the <code class="prettyprint">typeof</code> operator</p>
    <div class="slide" id="fnArg1">
         <textarea id="code10" name="code" class="code" mode="javascript" style="display: none;" runnable="true">console.log("Type of string: " + typeof "hello");
console.log("Type of number :" + typeof 1234);
console.log("Type of object literal: " + typeof {});
console.log("Type of array: " + typeof []);
console.log("Type of fn: " + typeof function(){});
</textarea>
    </div>
</div>

<div class="slide" id="function6">
    <h2>Function Arguments</h2>
    <p>Hit the brakes!</p>
    <div class="slide" id="checktype">
        <pre><code class="prettyprint">
console.log(typeof []); //object ?!? 
</code></pre>
    </div>
    <p class="slide" id="fnArg2">We have to work a little harder to check for an array</p>
    <div class="slide" id="fnArg3">
        <pre><code class="prettyprint">//borrowed from Douglas Crockford's "JavaScript: The Good Parts"
var is_array = function (value) {
    return Object.prototype.toString.apply(value) === '[object Array]';
};</code></pre>
    </div>
</div>

<div class="slide" id="arguments">
<h2>Function Arguments</h2>
<p>All arguments JavaScript are passed <strong>by value</strong>!  No, this is not a typo!</p>
    <textarea id="code2" name="code" class="code" mode="javascript" style="display: none;" runnable="true">function createCar(){
    var myCar = {
        make : "Ford",
        model : "Fusion"
    };

    changeCar(myCar);

    //if mycar was passed by ref it would now be a Honda!
    console.log(myCar);        
}

function changeCar(theObj){
    theObj.make = "Chevy";
    theObj.model = "Traverse";

    theObj = {};
    theObj.make = "Honda";

    console.log(theObj);
}

createCar();</textarea>
</div>

<div class="slide" id="function20"> 
    <h2>Lexical Scoping</h2>
    <p>Functions can be nested inside of other functions.  Each nested function has access to the scope of all its parents.  This is called lexical scoping. </p>
<!-- may have issues -->
     <textarea id="code8" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var lexical = function(){
    var outerVar = 'outer';
    
    return function(){

        var innerVar = "inner"; //outer function does not have access

        console.log(outerVar);

            return function(){
                console.log(innerVar, outerVar);
            }();
    }();
};

lexical();</textarea>
</div>



<div class="slide" id="functionConstructor1">
    <h2>Constructor Functions</h2>
    <p>JavaScript has a special type of function called a <code class="prettyprint">Constructor</code> function.</p>
    <ul>
        <li class="slide" id="const1">By convention the first letter of a constructor should be a capital letter.</li>
        <li class="slide" id="const2">Never use a constructor function without first using the <code class="prettyprint">new</code> keyword!</li>
        <li class="slide" id="const3">Using the new keyword will create a new scope for the function.</li>
        <li class="slide" id="const4">Using the new keyword will also create the inheritance tree. Without new a function will only inherit from the Function Constructor.</li>
    </ul>
</div>

<div class="slide" id="functionConstructor2">
    <h2>Constructor Functions</h2>
     <textarea id="code11" name="code" class="code" mode="javascript" style="display: none;" runnable="true">//create a new constuctor function called Robot
var Robot = function(robotName){
    this.robotName = robotName;
};

//add a new property to the prototype (more on this soon)
Robot.prototype.walk = function(){
    console.log("Go " + this.robotName + " go!");
};

//create a new instance of the robot using the new keyword
var robot = new Robot("Ferbbot");

//now we can tell the robot to walk
robot.walk();

var anotherRobot = Robot("phineasbot"); //we just created a global!! 

console.log(window.robotName); //note that robotName is now a property of window

Robot.walk(); //doesn't exist</textarea>
</div>

<div class="slide" id="function7">
    <h2>Closures</h2>
    <ul>
        <li class="slide" id="cl1">Closures are functions that are enclosed, and invoked within the context of another function.</li>
        <li class="slide" id="cl2">The execution context of the outer function(s) are saved and "wrapped" around the inner function.</li>
        <li class="slide" id="cl3">This effectively saves the "state" of the outer functions variables at the time the inner function is run.</li>
    </ul>
</div>

<div class="slide" id="function8">
    <h2>Contrived Closure Example</h2>
        <pre><code class="prettyprint">var timesCalled = function(){
    var total = 0;
    
    return function(){
        total++;
        console.log(total);
    };
    
};

var callTimer = timesCalled(); //this call right here creates the closure

callTimer();</code></pre>
<input type="button" data-run="closure" value="Run">
</div>

<!-- 
This
 -->

<div class="slide" id="thisTitle">
    <h1>This</h1>
</div>

<div class="slide" id="this1">
    <h2>This</h2>
    <p>The <code class="prettyprint">this</code> keyword one of JavaScript's most mis-understood keywords.</p>
    <pre><code class="prettyprint">
    var myObj = {
        myFunc : function(){ 
            console.log(this);
        }
    };
            
    var myFunc = function(){
        console.log(this);
    };
    
    myObj.myFunc();
    myFunc();
</code></pre>
<input type="button" data-run="this1" value="Run">
</div>

<div class="slide" id="this2">
    <h2>This</h2>
    <p>What happened in the function call?  Why did this point to window and not the function?</p>
    <p class="slide">In order to explain we must understand what "this" means in JavaScript.  This refers to the <strong>current execution context.</strong></p>
    <p class="slide">When we called the myFunc function from within the object, the object was the current execution context.</p>
    <p class="slide">When we called myFunc() from the root of the script tag, the window object was the current execution context</p>
</div>

<div class="slide" id="this6">
    <h2>call() and apply()</h2>
    <p>The <code class="prettyprint">call(this,arg1,arg2,arg3,...)</code> and <code class="prettyprint">apply(this,[args])</code> functions allow you to pass the value of <code class="prettyprint">this</code> as the first parameter.</p>
    <p>The difference is that the call function takes in any number of arguments whereas the apply function takes an array of arguments as its second argument.</p>
     <textarea id="code14" name="code" class="code" mode="javascript" style="display: none;" runnable="true">function whoAmI(){
    console.log("I am: " + this);
    console.log(arguments);
}
whoAmI.call("Ryan","Hello World",undefined,{},[]);
whoAmI.apply("Scott",["Hello World",undefined,{},[]]);</textarea>
</div>

<div class="slide" id="this3">
    <h2>This</h2>
    <p>Back to our "this" example</p>
    <pre><code class="prettyprint">&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;

var myFunc = function(){
    console.log(this);
}

myFunc()
&lt;/script&gt;</code></pre>
<p>When a function is called from the root of the script tag its the same as:</p>
<code class="prettyprint">myFunc.call(window,arguments);</code>
</div>

<div class="slide" id="this4">
    <h2>This</h2>
    <p>Lets take a look at "this" when using a constructor function to create a new instance.</p>
     <pre><code class="prettyprint">function Person(name){
    this.name = name;
    
    console.log(this);
    console.log(this.name);
}

var person = new Person("Bart");</code></pre>
<input type="button" data-run="this2" value="Run">
</div>

<div class="slide" id="this5">
<h2>This In Object Literals</h2>
<p>In an object literal <code class="prettyprint">this</code> refers to the current object</p>
 <textarea id="code16" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var myObj = {
    name : "Homer",

    sayHello : function(){
        console.log("Hello, " + this.name);
    }
};

myObj.sayHello();</textarea>
</div>

<div class="slide" id="this9">
<h2>This In Object Literals</h2>
<p>Be careful when using <code class="prettyprint">this</code> in nested functions!</p>
 <pre><code class="prettyprint">var myObj = {
    name : "Homer",

    sayHello : function(){
        //look what happens when this is used inside a nested function
        return function(){
            console.log("Hello, " + this.name);
            console.log(this);
        };
    }
};

myObj.sayHello();</code></pre>
<input type="button" data-run="this3" value="Run"><br><br>
<p class="slide">In nested functions <code class="prettyprint">this</code> referes back to global namespace!</p>
</div>

<div class="slide" id="this10">
    <h2>This and jQuery</h2>
    <p>jQuery likes to normalize <code class="prettyprint">this</code>, which can cause issues if you expect <code class="prettyprint">this</code> to refer to the current object.</p>
    <pre><code class="prettyprint">var obj = {
    init : function(){
        $('#thisButton').on('click',function(){
            console.log(this);
        });     
    }
};

obj.init();</code></pre>
<input type="button" id="thisButton" value="Run">
</div>

<div class="slide" id="this7">
    <h2>This and jQuery</h2>
    <p>Luckily there is an easy fix that a lot of library authors have chosen to use.</p>
     <pre><code class="prettyprint">var obj = {
    init : function(){
        var self = this; //create a ref to the current "this" scope

        $("#this4").on('click',function(){
            console.log(self);
        });     
    }
};

obj.init();</code></pre>
<input type="button" id="thisButton1" value="Run">
</div>

<div class="slide" id="this8">
    <h2>This</h2>
    <p>For a much more comprehensive look at "this" and "function invocation" read:
    <p class="slide" id="yehuda">Yehuda Kat's blog post: <a href="http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/" target="_blank">http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/</a></p>
    <p class="slide" id="digiweb">Scope In JavaScript: <a href="http://www.digital-web.com/articles/scope_in_javascript/">http://www.digital-web.com/articles/scope_in_javascript/</a></p>
</div>

<!-- 
Inheritence
 -->
<div class="slide" id="inheritance">
    <h1>Inheritance</h1>
</div>

<div class="slide" id="inheritance1">
    <h2>Inheritance</h2>
    <p>JavaScript uses a prototypical inheritance model.</p>
     <pre><code class="prettyprint">var Car = function(){ };

//add properties to Car's Prototype
Car.prototype = {
    wheels : 4, doors : 4,  manufacturer : ""
};

var R8 = function(){ }; 

//set the R8's prototype to a new instance of car
R8.prototype = new Car();

R8.prototype.constructor = R8; //reset the R8's constructor

var r8 = new R8();

console.log( r8 );
console.log( r8.wheels );</code></pre>
<input type="button" data-run="inheritance1" value="Run">
</div>

<div class="slide" id="inheritance2">
    <h2>So what is a "Prototype"</h2>
    <p>A prototype is just an object, constructor functions have a hidden link (exposed as __proto__ in some browsers) to an object that is it's prototype.</p>
    <p>JavaScript stops looking up the chain when it reaches Object.prototype</p>
</div>

<div class="slide" id="inheritance3">
    <h2>Prototype's Members</h2>
    <p>Adding to an object's prototype link is "live".  This means that properties added to a prototype are immediately accessable by all instances.</p>
     <textarea id="code21" name="code" class="code" mode="javascript" style="display: none;" runnable="true">function RealObject(name){ 
    this.name = name
};

var instanceOfRealObject = new RealObject("Ryan");
var anotherOfRealObject = new RealObject("Scott");

//we can add to a prototype at any time
RealObject.prototype.iRule = function(){ 
    return this.name + " Rules.";
};

console.log(instanceOfRealObject.iRule());
console.log(anotherOfRealObject.iRule());</textarea>
</div>

<div class="slide" id="objects9">
    <h2>Prototype on native Objects</h2>
    <p>You can also change the prototypes of the native objects like Object or Array</p>
    <p>Since there is no "deep copy" method available to arrays, lets add one.</p>
    <p><strong>Just because you can, doesn't mean you should!</strong></p>
     <textarea id="code22" name="code" class="code" mode="javascript" style="display: none;" runnable="true">Array.prototype.deepCopy = function(){
    return this.slice(); //this refers to the array object.  
};

var myArray = ["Apple","Peach","Pear"];
var copiedArray = myArray.deepCopy();

copiedArray[0] = "Banana";

console.log(copiedArray);</textarea>
</div>

<!-- 
Design Patterns
 -->

<div class="slide" id="designPatterns1">
    <h2>Some Common JavaScript-Centric Design Patterns</h2>
</div>

<div class="slide" id="designPatterns2">
    <h2>Module Pattern</h2>
    <p>The module pattern can be used to "hide" variables and functions.</p>
     <textarea id="code23" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var publicFunctions = (function(){
    var name = "foobar";
    
    var privateFn = function(){
        console.log("i am private");                            
    };
    
    var publicFn = {
        sayHello : function(){
            console.log("Hello, " + name);
        }
    };
    
    return publicFn;
}()); //remember the closure slide? This function is immediately invoked creating a closure

publicFunctions.sayHello();
console.log(publicFunctions.name);</textarea>
</div>

<div class="slide" id="designPatterns7">
    <h2>Options</h2>
    <p>The options pattern is very common in libraries and jQuery plugins</P>
 <pre><code class="prettyprint">$.fn.myPlugin = function(options){
    var defaults = {color: "blue", height: "200px" };

    //remember to check the type of the argument!
    if(typeof options === 'object'){
        options = $.extend(defaults,options);
    } else {
        options = defaults;
    }

    console.log(options);
};
    
$(document).myPlugin({color:'black', height: '500px'});
$(document).myPlugin();</code></pre>
​<input type="button" data-run="optionsPattern" value="run">
</div>

<div class="slide" id="designPatterns9">
    <h2>Pub-Sub (AKA Observer)</h2>
    <p>The pub-sub pattern specifies that there are "publishers" that publish events, and "subscribers" that can subscribe to those events.</p>
    
</div>

<div class="slide" id="designPatterns8">
    <h2>Pub-Sub (AKA Observer)</h2>
    <p>This pattern you probably already use every day.</p>
    <pre><code class="prettyprint">​&lt;a href=&quot;#&quot; id=&quot;clickMe&quot;&gt;Observe Me&lt;/a&gt;</code></pre>
<pre><code class="prettyprint">​//clickme's click event is the "publisher" 
//the anonymous function parameters are the subscribers

$(&quot;#clickMe&quot;).on(&#39;click&#39;,function(){
    console.log(&quot;First Observable of click&quot;);
});
    
$(&quot;#clickMe&quot;).on(&#39;click&#39;,function(){
    console.log(&quot;Second Observable of click&quot;);
});</code></pre>
</div>

<div class="slide" id="designPatterns10">
    <h2>Prototype</h2>
    <p>Don't confuse the prototype pattern with an object's Prototype function!</p>
    <p>The prototype pattern is a pattern where an object is used for the prototype of another object.</p>
     <textarea id="code25" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var motorcycle = {
    wheels : 2,
    go : function(){  }
};
    
var sportbike = {
    engine: "1000cc"
};
    
for(var attr in motorcycle){
    sportbike[attr] = motorcycle[attr];
}</textarea>
</div>

<div class="slide" id="designPatterns11">
    <h2>Prototype</h2>
    <p>This pattern is used very extensively in both jQuery and Backbone applications.</p>
    <p>In fact when you create a jQuery plugin you are using this pattern, using <code class="prettyprint">jQuery.fn</code> as your prototype.</p>
    <p>jQuery and underscore.js have a function that helps with this pattern.</p>
     <textarea id="code26" name="code" class="code" mode="javascript" style="display: none;" runnable="true">var mammal = {
    hair : "brown",
    breath : function(){}
};

var cat = $.extend(mammal,{
    eyes: 2,
    ears: 2
});</textarea>
</div>

<div class="slide" id="designPatterns13">
    <h2>$, window, undefined</h2>
    <p>This isn't a pattern as much as it is a best practice.  This is just a way to make sure that $ is assigned to jQuery in your module,
        that the window object is protected, and that undefined, is truly undefined.</p>
    <code class="prettyprint">(function( $, window, undefined ){

}( window.jQuery, window ))</code>
</div>

<div class="slide" id="designPatterns12">
    <h2>Design Patterns</h2>
    <p>Be sure to check out Addi Osmani's "Essential JavaScript Design Patterns" open source book at: <a href="https://github.com/addyosmani/essential-js-design-patterns" target="_blank">https://github.com/addyosmani/essential-js-design-patterns</a></p>
</div>

<!-- 
Resources
 -->

<div class="slide" id="resourcesTitle">
    <h1>Resources</h1>
</div>

<div class="slide" id="resources">
    <h2>Resources</h2>
    <p>You can get really good at JavaScript without spending a single penny!</p>
    <ul>
        <li>JavaScript Enlightenment (now open source!) <a href="http://javascriptenlightenment.com/" target="_blank">http://javascriptenlightenment.com/</a></li>
        <li>Marijn Haverbeke's Eloquent JavaScript <a href="http://eloquentjavascript.net/contents.html" target="_blank">http://eloquentjavascript.net/contents.html</a></li>
        <li>Mozilla's JavaScript Reference <a href="https://developer.mozilla.org/en/JavaScript/Reference" target="_blank">https://developer.mozilla.org/en/JavaScript/Reference</a></li>
        <li>JavaScript Koans <a href="https://github.com/liammclennan/JavaScript-Koans" target="_blank">https://github.com/liammclennan/JavaScript-Koans</a></li>
        <li>JavaScript Garden <a href="http://bonsaiden.github.com/JavaScript-Garden/" target="_blank">http://bonsaiden.github.com/JavaScript-Garden/</a></li>
        <li>AppendTo's excellent video lessons at: <a href="http://learn.appendto.com" target="_blank">http://learn.appendto.com</a></li>
        <li>Nathan's Lessons <a href="http://nathansjslessons.appspot.com/" target="_blank">Interactive JavaScript Lessons</a></li>
        <li>JSFiddle <a href="http://jsfiddle.net/" target="_blank">http://jsfiddle.net</a></li>
        <li>This presentation of course, which is on <a href="http://bittersweetryan.github.com/javascript-for-coldfusion-devs" target="_blank">https://github.com/bittersweetryan/javascript-for-coldfusion-devs</a></li>
    </ul>
    <p>However I'd be remiss if I left out Douglas Crockford's "<a href="http://shop.oreilly.com/product/9780596517748.do" target="_blank">JavaScript: The Good Parts</a>".</p>
</div>

<div class="slide" id="giveaway">
    <h2>Giveaway Time!</h2>
    <p class="slide">In this presentation we created a "Robot" constructor function that took a name as a parameter.  What was the name of one of the robots we created?</p>
    <p class="slide">Question 2 (just in case).  Name two things that ColdFusion and JavaScript have in common.</p>
</div>


<div class="slide" id="qna">
    <h1>Questions?</h1>
</div>

<div class="slide" id="fin">
    <h1>fin.</h1>
</div>

<form action="." method="get" class="goto-form">
    <label for="goto-slide">Go to slide:</label>
    <input type="number" name="slidenum" id="goto-slide">
    <input type="submit" value="Go">
</form>

<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<p class="deck-status">
    <span class="deck-status-current"></span>
    /
    <span class="deck-status-total"></span>
</p>

<a href="." title="Permalink to this slide" class="deck-permalink">#</a>


    <script src="jquery-1.7.min.js"></script>
    <script src="modernizr.custom.js"></script>
    
   
    <script src="extensions/codemirror/codemirror.js"></script>

    <!-- Syntax highlighting Modes -->

    <!-- javascript -->
 

<!-- Deck Core and extensions -->
<script src="core/deck.core.js"></script>
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/hash/deck.hash.js"></script>

<script src="extensions/codemirror/mode/javascript/javascript.js"></script>
<script src="extensions/codemirror/mode/xml/xml.js"></script>
<script src="extensions/codemirror/mode/css/css.js"></script>
<script src="extensions/codemirror/mode/htmlmixed/htmlmixed.js"></script>

<script type="text/javascript" src="google-code-prettify/prettify.js"></script>
<script src="introduction.js"></script>

<!-- enable codemirror plugin -->
<script src="extensions/codemirror/deck.codemirror.js"></script>

<script src="samples.js"></script>

</body>
</html>
